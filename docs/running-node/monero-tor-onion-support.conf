# Monero Documentation
# Running Monero Open Node with Tor Onion Support
# https://monerodocs.org/running-node/open-node-tor-onion

# Data directory (blockchain db and indices)
data-dir=/your/data/dir/to/.monero  # Remember to create the monero user first

# Log file
log-file=your/data/dir/to/.monero/log/monero-tor-onion-support.log
max-log-file-size=0            # Prevent monerod from managing the log files; we want logrotate to take care of that

check-updates=disabled         # Do not check DNS TXT records for a new version

# P2P full node
p2p-bind-ip=127.0.0.1           # Bind to only local interface
#p2p-bind-ip=0.0.0.0            # Bind to all interfaces (the default)
#p2p-bind-port=18080            # Bind to default port

# RPC open node
public-node=1                  # Advertise to other users they can use this node as a remote one for connecting their wallets
confirm-external-bind=1        # Open Node (confirm)
rpc-bind-ip=127.0.0.1          # Bind to only local interface (the Open Node)
#rpc-bind-ip=0.0.0.0           # Bind to all interfaces (the Open Node)
rpc-bind-port=18081            # Bind to default port (the Open Node)
restricted-rpc=1               # Obligatory for Open Node interface
no-igd=1                       # Disable UPnP port mapping
no-zmq=1                       # Disable ZMQ RPC server to decrease attack surface (it's not used)

# RPC TLS
rpc-ssl=autodetect         # Use TLS if client wallet supports it (the default behavior); the certificate will be generated on the fly on every restart

# Mempool size
max-txpool-weight=268435456    # Maximum unconfirmed transactions pool size in bytes (here 256MB, default ~618MB)

# Slow but reliable db writes
db-sync-mode=safe

out-peers=64              # This will enable much faster sync and tx awareness; the default 8 is suboptimal nowadays
in-peers=64               # The default is unlimited; we prefer to put a cap on this

limit-rate-up=1048576     # 1048576 kB/s == 1GB/s; a raise from default 2048 kB/s; contribute more to p2p network
limit-rate-down=1048576   # 1048576 kB/s == 1GB/s; a raise from default 8192 kB/s; allow for faster initial sync

# Tor: broadcast transactions originating from connected wallets over Tor (does not concern relayed transactions)
tx-proxy=tor,127.0.0.1:9050,16

# Tor: add P2P seed nodes for the Tor network
# For an up-to-date list of working nodes see:
# * https://xmrguide.org/remote_nodes
# * https://monero.fail/
add-peer=xmrnodeanyunhzcmhsjnbgchvslugtbrvvxbibnwsfmiq7ks3cwkqzad.onion:18081
add-peer=xmrnodesarnt4w35aqmu66aart3o324yw6qbnv6pglpof6uqaydzk5id.onion:18081
add-peer=mxcd4577fldb3ppzy7obmmhnu3tf57gbcbd4qhwr2kxyjj2qi3dnbfqd.onion:18081
add-peer=6dsdenp6vjkvqzy4wzsnzn6wixkdzihx3khiumyzieauxuxslmcaeiad.onion:18081
add-peer=bhoq56f2rsfkmmvov77ygbtfoh5rw7e6j5pxnwtnjl6dcpmzhmy566ad.onion:18089
add-peer=monerobpsls5krmdra2rousd7qgze6v5dyylqkdzruejcbgddjxum6yd.onion:18089
add-peer=usexmr2eeexmlwpuvsfe6tyjmdqliplb2b7uxju6yrrziq3n7fksnxyd.onion:18081
add-peer=mxcd4577fldb3ppzy7obmmhnu3tf57gbcbd4qhwr2kxyjj2qi3dnbfqd.onion:18081
add-peer=56wl7y2ebhamkkiza4b7il4mrzwtyvpdym7bm2bkg3jrei2je646k3qd.onion:18089
add-peer=lpngjswsmnsixjddt7hb3aru4kjqpkro2fyg4wb7vjrmqlmlpatfu7id.onion:18089
add-peer=xmrnodesarnt4w35aqmu66aart3o324yw6qbnv6pglpof6uqaydzk5id.onion:18081
add-peer=ghziyspoobhmp5oun2xcomrmetqiwbvuaegmte3s47nnqv7hkaa64sid.onion:18089
add-peer=wwcsd33eo5gysrzzdu547p3atudruzevh7rbxxo7tras4iz4pm626did.onion:18089
add-peer=xmrnodeanyunhzcmhsjnbgchvslugtbrvvxbibnwsfmiq7ks3cwkqzad.onion:18081
add-peer=5nvd6jbefgto3u74nzzdkcsbqgxyzrkk7bz5qupsdqg4gbuj5valiaqd.onion:18081
add-peer=poysibicsj73uhw7sjrv3fyopoyulrns4nlr5amyqdtafkqzlocd4qad.onion:18081
add-peer=ode6i5zdrm4xjqeubacrwmgnihzpfsfvpdf4kvcphhnrqkmrhq5idxyd.onion:28089
add-peer=6dsdenp6vjkvqzy4wzsnzn6wixkdzihx3khiumyzieauxuxslmcaeiad.onion:18081
add-peer=xmrrpcmyrz3imrldcwiqt4vm5asq2vefgzybamxdigx37p3ctfcjnsad.onion:18089
add-peer=hashvaultsvg2rinvxz7kos77hdfm6zrd5yco3tx2yh2linsmusfwyad.onion:18081
add-peer=fk65gptl47nt3fkxt53bszjmwpnzzhegk2yelrut3zazfuuttv4pvaad.onion:18081
add-peer=rno75kjcw3ein6i446sqby2xkyqjarb75oq36ah6c2mribyklzhurpyd.onion:28083        # it's mainnet despite the weird port, according to reddit
add-peer=sqzrokz36lgkng2i2nlzgzns2ugcxqosflygsxbkybb4xn6gq3ouugqd.onion:18083        # very flaky, works 1 in 3 times

# Make the seed nodes permanent to fix monerod issue of not maintaining enough connections,
# based on this reddit comment:
# https://www.reddit.com/r/monerosupport/comments/k3m3x2/comment/ge5ehcy/?utm_source=share&utm_medium=web2x&context=3
add-priority-node=monerobpsls5krmdra2rousd7qgze6v5dyylqkdzruejcbgddjxum6yd.onion:18089
add-priority-node=usexmr2eeexmlwpuvsfe6tyjmdqliplb2b7uxju6yrrziq3n7fksnxyd.onion:18081
add-priority-node=mxcd4577fldb3ppzy7obmmhnu3tf57gbcbd4qhwr2kxyjj2qi3dnbfqd.onion:18081
add-priority-node=56wl7y2ebhamkkiza4b7il4mrzwtyvpdym7bm2bkg3jrei2je646k3qd.onion:18089
add-priority-node=lpngjswsmnsixjddt7hb3aru4kjqpkro2fyg4wb7vjrmqlmlpatfu7id.onion:18089
add-priority-node=xmrnodesarnt4w35aqmu66aart3o324yw6qbnv6pglpof6uqaydzk5id.onion:18081
add-priority-node=ghziyspoobhmp5oun2xcomrmetqiwbvuaegmte3s47nnqv7hkaa64sid.onion:18089

# Tor: tell monerod your onion address so it can be advertised on P2P network
anonymous-inbound=put-your-onion-addrees-here.onion:18083,127.0.0.1:18083,64

# Tor: be forgiving to connecting wallets; suggested by http://xmrguide42y34onq.onion/remote_nodes
disable-rpc-ban=1
